<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Dashboard - EAMHC</title>

    <link rel="stylesheet" href="../styles/base.css" />
    <link rel="stylesheet" href="../styles/user-dashboard.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <nav class="customer-navbar">
      <h2>Emotion Aware Health Coach</h2>
      <div class="customer-welcome">
        Welcome, <span id="customer-name">User</span>
      </div>

      <div class="nav-right">
        <div class="notif-bell" onclick="toggleNotifications()">
          <i class="fa-solid fa-bell"></i>
          <span id="notif-count">0</span>
        </div>
        <a
          href="./landing.html"
          id="nav-right-link"
          onclick="localStorage.removeItem('currentUser')"
          >Logout</a
        >
      </div>
    </nav>

    <section class="customer-stats">
      <div class="stat-card">
        <h3 id="total-sessions">0</h3>
        <p>Total Sessions</p>
      </div>
      <div class="stat-card">
        <h3 id="scheduled-sessions">0</h3>
        <p>Scheduled</p>
      </div>
      <div class="stat-card">
        <h3 id="inprogress-sessions">0</h3>
        <p>In Progress</p>
      </div>
      <div class="stat-card">
        <h3 id="completed-sessions">0</h3>
        <p>Completed</p>
      </div>
      <div class="stat-card">
        <h3 id="avg-emotion-score">0</h3>
        <p>Avg Emotion Score</p>
      </div>
    </section>

    <!-- Quick Actions Section -->
    <section class="quick-actions">
      <div class="action-buttons">
        <button class="btn-primary" onclick="openSessionModal()">
          <i class="fas fa-plus"></i> New Session
        </button>
        <button class="btn-outline" onclick="openMoodModal()">
          <i class="fas fa-smile"></i> Log Mood
        </button>
        <button class="btn-outline" onclick="openGoalModal()">
          <i class="fas fa-bullseye"></i> Set Goal
        </button>
      </div>
    </section>

    <!-- Tabs Section -->
    <section class="tabs-section">
      <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('sessions')">
          My Sessions
        </button>
        <button class="tab-btn" onclick="switchTab('mood')">
          Mood History
        </button>
        <button class="tab-btn" onclick="switchTab('goals')">
          Health Goals
        </button>
      </div>
    </section>

    <!-- Content Sections -->
    <section class="content-section">
      <!-- Sessions Tab -->
      <div id="sessions-tab" class="tab-content active">
        <div class="section-header">
          <h3>My Therapy Sessions</h3>
        </div>
        <div id="sessions-container" class="ticket-list">
          <p class="empty-text">No sessions yet</p>
        </div>
      </div>

      <!-- Mood History Tab -->
      <div id="mood-tab" class="tab-content">
        <div class="section-header">
          <h3>Mood History</h3>
        </div>
        <div id="mood-container" class="mood-list">
          <p class="empty-text">No mood entries yet</p>
        </div>
      </div>

      <!-- Goals Tab -->
      <div id="goals-tab" class="tab-content">
        <div class="section-header">
          <h3>My Health Goals</h3>
        </div>
        <div id="goals-container" class="goals-list">
          <p class="empty-text">No goals yet</p>
        </div>
      </div>
    </section>

    <!-- Session Creation Modal -->
    <div id="session-modal" class="modal">
      <div class="modal-content">
        <h3>Create New Session Request</h3>
        <p>Tell us how you're feeling and what kind of support you need.</p>

        <div class="input-grid">
          <div class="input-group">
            <label>Session Title <span style="color: red">*</span></label>
            <input
              type="text"
              id="session-title"
              placeholder="e.g., Anxiety Management Session"
            />
          </div>

          <div class="input-group">
            <label>Emotion Type <span style="color: red">*</span></label>
            <select id="emotion-type">
              <option value="">Select emotion</option>
              <option value="anxiety">Anxiety</option>
              <option value="depression">Depression</option>
              <option value="stress">Stress</option>
              <option value="happy">Happy</option>
              <option value="calm">Calm</option>
              <option value="angry">Angry</option>
              <option value="sad">Sad</option>
              <option value="excited">Excited</option>
            </select>
          </div>

          <div class="input-group">
            <label>Emotion Score (1-10) <span style="color: red">*</span></label>
            <input
              type="number"
              id="emotion-score"
              min="1"
              max="10"
              placeholder="1-10"
            />
          </div>

          <div class="input-group">
            <label>Session Type <span style="color: red">*</span></label>
            <select id="session-type">
              <option value="">Select type</option>
              <option value="therapy">Therapy</option>
              <option value="coaching">Coaching</option>
              <option value="emergency">Emergency</option>
              <option value="check-in">Check-in</option>
            </select>
          </div>

          <div class="input-group">
            <label>Session Date <span style="color: red">*</span></label>
            <input type="datetime-local" id="session-date" />
          </div>

          <div class="input-group">
            <label>Duration (minutes)</label>
            <input
              type="number"
              id="session-duration"
              value="60"
              min="30"
              max="120"
            />
          </div>
        </div>

        <div class="input-group">
          <label>Description <span style="color: red">*</span></label>
          <textarea
            id="session-description"
            placeholder="Describe what you're experiencing and what kind of help you need..."
            rows="4"
          ></textarea>
        </div>

        <div class="modal-actions">
          <button id="cancel-session" class="btn-outline">Cancel</button>
          <button id="save-session" class="btn-primary">Create Session</button>
        </div>
      </div>
    </div>

    <!-- Mood Entry Modal -->
    <div id="mood-modal" class="modal">
      <div class="modal-content">
        <h3>Log Your Mood</h3>
        <p>How are you feeling right now?</p>

        <div class="input-grid">
          <div class="input-group">
            <label>Mood Type <span style="color: red">*</span></label>
            <select id="mood-type">
              <option value="">Select mood</option>
              <option value="anxiety">Anxiety</option>
              <option value="depression">Depression</option>
              <option value="stress">Stress</option>
              <option value="happy">Happy</option>
              <option value="calm">Calm</option>
              <option value="angry">Angry</option>
              <option value="sad">Sad</option>
              <option value="excited">Excited</option>
              <option value="neutral">Neutral</option>
            </select>
          </div>

          <div class="input-group">
            <label>Mood Score (1-10) <span style="color: red">*</span></label>
            <input
              type="number"
              id="mood-score"
              min="1"
              max="10"
              placeholder="1=Very Poor, 10=Excellent"
            />
          </div>
        </div>

        <div class="input-group">
          <label>Notes (Optional)</label>
          <textarea
            id="mood-notes"
            placeholder="Any thoughts or factors affecting your mood?"
            rows="3"
          ></textarea>
        </div>

        <div class="modal-actions">
          <button id="cancel-mood" class="btn-outline">Cancel</button>
          <button id="save-mood" class="btn-primary">Save Mood</button>
        </div>
      </div>
    </div>

    <!-- Goal Creation Modal -->
    <div id="goal-modal" class="modal">
      <div class="modal-content">
        <h3>Set Health Goal</h3>
        <p>What would you like to achieve for your wellbeing?</p>

        <div class="input-grid">
          <div class="input-group">
            <label>Goal Title <span style="color: red">*</span></label>
            <input
              type="text"
              id="goal-title"
              placeholder="e.g., Improve Sleep Quality"
            />
          </div>

          <div class="input-group">
            <label>Category <span style="color: red">*</span></label>
            <select id="goal-category">
              <option value="">Select category</option>
              <option value="mental_health">Mental Health</option>
              <option value="fitness">Fitness</option>
              <option value="nutrition">Nutrition</option>
              <option value="sleep">Sleep</option>
              <option value="relationships">Relationships</option>
              <option value="career">Career</option>
            </select>
          </div>

          <div class="input-group">
            <label>Target Date <span style="color: red">*</span></label>
            <input type="date" id="goal-target-date" />
          </div>
        </div>

        <div class="input-group">
          <label>Description <span style="color: red">*</span></label>
          <textarea
            id="goal-description"
            placeholder="Describe your goal and what success looks like..."
            rows="3"
          ></textarea>
        </div>

        <div class="modal-actions">
          <button id="cancel-goal" class="btn-outline">Cancel</button>
          <button id="save-goal" class="btn-primary">Create Goal</button>
        </div>
      </div>
    </div>

    <!-- Password Reset Modal -->
    <div id="password-reset-modal" class="modal-overlay" style="display: none">
      <div class="modal-box">
        <h3>Reset Your Password</h3>
        <p>
          You are using a temporary password. Please set a new one to continue.
        </p>
        <input
          type="password"
          id="new-password"
          placeholder="Enter new password"
          class="auth-input"
        />
        <input
          type="password"
          id="confirm-password"
          placeholder="Confirm new password"
          class="auth-input"
        />
        <div style="margin-top: 12px; display: flex; gap: 10px">
          <button id="save-new-password" class="btn-primary" style="flex: 1">
            Save Password
          </button>
        </div>
      </div>
    </div>

    <!-- Notifications Popup -->
    <div id="notif-panel" style="display: none">
      <div class="notif-header">
        <h4>Notifications</h4>
        <select id="notif-sort">
          <option value="default">Default</option>
          <option value="latest">Date: Latest</option>
          <option value="earliest">Date: Earliest</option>
        </select>
      </div>
      <div id="notif-list"></div>
      <button
        id="clear-all-notifs"
        class="btn-outline"
        style="width: 100%; margin-top: 10px"
      >
        Clear All
      </button>
    </div>

    <script src="../scripts/user-dashboard.js"></script>
  </body>
</html>